<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
 
  <title>ë¡œê·¸ì¸</title>
  <style>
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display:flex; align-items:center; justify-content:center;
      height:100vh; margin:0;
      background: url('control.jpg') no-repeat center center/cover; /* ë°°ê²½ ì´ë¯¸ì§€ */
      backdrop-filter: blur(5px);
    }

    .glass-card {
      width: 360px;
      padding: 32px 24px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.2); /* íˆ¬ëª…í•œ í°ìƒ‰ */
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(12px); /* ìœ ë¦¬ íš¨ê³¼ í•µì‹¬ */
      -webkit-backdrop-filter: blur(12px); /* Safari ëŒ€ì‘ */
      border: 1px solid rgba(255, 255, 255, 0.3);
      text-align: center;
      color: #fff;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 12px;
    }
    p {
      font-size: 15px;
      margin-bottom: 20px;
      color: rgba(255, 255, 255, 0.9);
    }

    input, button {
      width:80%;
      padding:12px;
      margin: 6px 0;
      border-radius:12px;
      border:none;
      outline:none;
      font-size:16px;
    }

    input {
      background: rgba(255, 255, 255, 0.2);
      color:#fff;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }

    button {
      background: rgba(26,115,232,0.8);
      color:#fff;
      font-weight:bold;
      cursor:pointer;
      transition: 0.2s;
    }
    button:hover {
      background: rgba(26,115,232,1);
    }

    .msg {
      font-size:12px;
      color:#ffcccc;
      height:16px;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="glass-card">
    <h1>ğŸ”’ ê´€ì œíŒ€ ì „ìš© ë¡œê·¸ì¸</h1>
    <p>ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
    <input id="pw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" autocomplete="current-password" />
    <button id="loginBtn" type="button">ì ‘ì†í•˜ê¸°</button>
    <div class="msg" id="msg" aria-live="polite"></div>
  </div>

  <script>
    const PASSWORD_SHA256 = "4d17bdb3db3660537506883db4b4daff641695c0d048cf95e8a10f970adb94aa";
    const TOKEN_KEY = "site_auth_token";
    const TOKEN_TTL_MIN = 120;

    async function sha256Hex(t) {
      const e = new TextEncoder().encode(t);
      const b = await crypto.subtle.digest("SHA-256", e);
      return Array.from(new Uint8Array(b)).map(x => x.toString(16).padStart(2, "0")).join("");
    }

    function setToken() {
      const exp = Date.now() + TOKEN_TTL_MIN * 60 * 1000;
      localStorage.setItem(TOKEN_KEY, JSON.stringify({ ok: true, exp }));
    }

    const pwInput = document.getElementById("pw");
    const loginBtn = document.getElementById("loginBtn");
    const msgEl = document.getElementById("msg");

    // ê³µí†µ ë¡œê·¸ì¸ ì²˜ë¦¬ í•¨ìˆ˜
    async function doLogin() {
      msgEl.textContent = ""; // ì´ì „ ë©”ì‹œì§€ ì œê±°
      const pw = pwInput.value.trim();
      // (ì„ íƒ) ë¹ˆ ì…ë ¥ ì²˜ë¦¬
      if (!pw) {
        msgEl.textContent = "ğŸ”¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.";
        pwInput.focus();
        return;
      }

      try {
        const hash = await sha256Hex(pw);
        if (hash === PASSWORD_SHA256) {
          setToken();
          // ì„±ê³µí•˜ë©´ ë£¨íŠ¸ë¡œ ì´ë™ (indexê°€ ì•„ë‹Œ /)
          window.location.replace("/");
        } else {
          msgEl.textContent = "âŒ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
          pwInput.focus();
          pwInput.select();
        }
      } catch (err) {
        console.error("sha256 error:", err);
        msgEl.textContent = "âš ï¸ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.";
      }
    }

    // ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œê·¸ì¸
    loginBtn.addEventListener("click", doLogin);

    // ì…ë ¥ì°½ì—ì„œ Enter í‚¤ ëˆ„ë¥´ë©´ ë¡œê·¸ì¸ (keydown ì‚¬ìš©: Enter ê°ì§€ì— ì•ˆì •ì )
    pwInput.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        doLogin();
      }
    });

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤ (ì‚¬ìš©ì í¸ì˜)
    pwInput.focus();
  </script>
</body>